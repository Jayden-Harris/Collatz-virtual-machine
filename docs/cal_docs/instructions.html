<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CAL Instructions</title>
  <style>
    html {
      scroll-behavior: smooth;
    }
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f9f9f9;
      color: #333;
    }

    .container {
      display: flex;
      min-height: 100vh;
    }

    .sidebar {
      position: fixed;
      width: 220px;
      height: 100vh;
      background-color: #1e1e2f;
      color: white;
      padding: 1.5em;
      box-shadow: 2px 0 5px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
    }

    .sidebar h2 {
      margin: 0 0 1em 0;
      font-size: 1.5em;
      font-weight: 600;
    }

    .sidebar nav {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
    }

    .sidebar nav a {
      color: #bbb;
      text-decoration: none;
      margin-bottom: 1em;
      font-weight: 500;
      transition: color 0.2s ease;
    }

    .sidebar nav a:hover {
      color: white;
    }

    .sidebar nav a.active {
      color: white;
      font-weight: 700;
      text-decoration: underline;
    }

    main.content {
      margin-left: 260px; /* sidebar width + gap */
      padding: 2.5em 3em;
      max-width: 900px;
    }

    header h1 {
      font-size: 2.8em;
      margin-bottom: 0.1em;
      font-weight: 700;
      color: #007c91;
    }

    .subtitle {
      font-size: 1.2em;
      color: #555;
      margin-bottom: 2em;
      font-weight: 400;
    }

    section h2 {
      margin-top: 2.5em;
      font-size: 1.8em;
      font-weight: 700;
      border-bottom: 3px solid #007c91;
      padding-bottom: 0.3em;
      margin-bottom: 1.5em;
      color: #007c91;
    }

    ul {
      line-height: 1.7;
      padding-left: 1.25em;
      margin-bottom: 3em;
    }

    ul li {
      margin-bottom: 0.7em;
      font-size: 1.05em;
    }

    ul li a {
      color: #007c91;
      text-decoration: none;
      font-weight: 600;
    }

    ul li a:hover {
      text-decoration: underline;
    }

    /* Table styling for example usage */
    table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 3em;
    }
    thead tr {
      background-color: #007c91;
      color: white;
    }
    th, td {
      padding: 0.75em 1em;
      border: 1px solid #ccc;
      vertical-align: top;
    }
    th {
      text-align: left;
      font-weight: 700;
    }
    td code {
      background: #f0f0f0;
      padding: 0.1em 0.3em;
      border-radius: 3px;
      font-family: 'Courier New', Courier, monospace;
    }
    pre {
      margin: 0;
      font-family: 'Courier New', Courier, monospace;
      white-space: pre-wrap;
      word-break: break-word;
      background: #272822;
      color: #f8f8f2;
      padding: 0.5em 1em;
      border-radius: 5px;
      box-shadow: 0 0 6px rgba(0,124,145,0.4);
    }

    /* Button style consistent with Registers page */
    .btn {
      display: inline-block;
      padding: 0.85em 1.8em;
      background-color: #007c91;
      color: white;
      border-radius: 5px;
      text-decoration: none;
      font-weight: 700;
      box-shadow: 0 3px 7px rgba(0,124,145,0.5);
      transition: background-color 0.3s ease;
      margin-top: 2em;
    }
    .btn:hover {
      background-color: #005f65;
    }

    /* Responsive tweaks */
    @media screen and (max-width: 768px) {
      .container {
        flex-direction: column;
      }

      .sidebar {
        width: 100%;
        height: auto;
        position: relative;
        padding: 1em 1.5em;
      }

      main.content {
        margin-left: 0;
        max-width: 100%;
        padding: 1.5em 1.5em 3em 1.5em;
      }

      table, thead, tbody, th, td, tr {
        display: block;
        width: 100%;
      }

      thead tr {
        display: none;
      }

      tr {
        margin-bottom: 1.25em;
        border-bottom: 2px solid #007c91;
        padding-bottom: 1em;
      }

      td {
        border: none;
        padding-left: 50%;
        position: relative;
      }

      td::before {
        position: absolute;
        top: 0.75em;
        left: 1em;
        width: 45%;
        padding-right: 1em;
        white-space: nowrap;
        font-weight: 700;
        color: #007c91;
        content: attr(data-label);
      }

      pre {
        padding: 0.75em 1em;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <aside class="sidebar">
      <h2>CAL Docs</h2>
      <nav>
        <a href="index.html">Home</a>
        <a href="registers.html">Registers</a>
        <a href="instructions.html" class="active">Instructions</a>
        <a href="syntax.html">Syntax</a>
        <a href="syscalls.html">Syscalls</a>
        <a href="examples.html">Examples</a>
      </nav>
    </aside>

    <main class="content">
      <header>
        <h1>CAL Instructions</h1>
        <p class="subtitle">Learn how to write and use CAL instructions effectively</p>
      </header>
      <section>
  <h2>Understanding CAL Instructions and Opcodes</h2>
  <p>
    CAL instructions form the core commands that drive the behavior of programs written in the CAL assembly language. Each instruction is represented internally by an <code>opcode</code> â€” a unique numeric code that the CAL Virtual Machine interprets to perform specific operations such as arithmetic calculations, data movement, input/output, and flow control.
  </p>
  <p>
    The OPCODES defined here serve as identifiers for these fundamental operations. By associating human-readable mnemonics (like <code>MOV</code>, <code>ADD</code>, or <code>JMP</code>) with numeric values, the machine can efficiently decode and execute instructions at runtime.
  </p>
  <p>
    These instructions enable CAL to manipulate registers and memory, perform arithmetic and logical operations, handle input/output tasks, and control program flow. Understanding these opcodes and how they map to instruction behavior is essential for writing effective CAL programs and for working with the assembler or virtual machine internals.
  </p>
  <p>
    Below is the complete list of currently implemented OPCODES in CAL, along with their assigned numeric values. These opcodes are used throughout the language to specify the operation each instruction performs.
  </p>
</section>
      <section>
        <h2>Instruction operation codes</h2>
        <pre class="instruction-code">
// OPCODES enum
enum class OPCODES : uint8_t {
  LOAD = 3, 
  STORE = 4, 
  MOV = 5, 
  ADD = 6, 
  SUB = 7,
  MUL = 8, 
  DIV = 9,
  OUT = 10,
  HALT = 11,
  START = 12,
  MOV_STR = 13,
  PUTS = 14,
  JMP = 15,
  JNZ = 16,
  MOV_REG = 17,
  AND = 18,
  GETS_STR = 19,
  PSTR = 35,
  EXC = 36,
  CMP_STR = 37,
  GETS_INT = 38,
  SYS_CALL = 39,
  UNK = 0 
};
        </pre>
      </section>

      <section>
        <h2>Example usage</h2>
        <table>
          <thead>
            <tr>
              <th>Instruction</th>
              <th>Description</th>
              <th>Example</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td data-label="Instruction"><code>MOV (5)</code></td>
              <td data-label="Description">Move data from one register to another or load an immediate value.</td>
              <td data-label="Example"><pre>MOV AX, 10
MOV BX, AX</pre></td>
            </tr>
            <tr>
              <td data-label="Instruction"><code>ADD (6)</code></td>
              <td data-label="Description">Add two registers or values and store the result in the destination register.</td>
              <td data-label="Example"><pre>ADD AX, BX</pre></td>
            </tr>
            <tr>
              <td data-label="Instruction"><code>SUB (7)</code></td>
              <td data-label="Description">Subtract the source operand from the destination operand.</td>
              <td data-label="Example"><pre>SUB AX, 1</pre></td>
            </tr>
            <tr>
              <td data-label="Instruction"><code>MUL (8)</code></td>
              <td data-label="Description">Multiply two values and store the result in the destination register.</td>
              <td data-label="Example"><pre>MUL AX, BX</pre></td>
            </tr>
            <tr>
              <td data-label="Instruction"><code>DIV (9)</code></td>
              <td data-label="Description">Divide the destination operand by the source operand.</td>
              <td data-label="Example"><pre>DIV AX, BX</pre></td>
            </tr>
            <tr>
              <td data-label="Instruction"><code>OUT (10)</code></td>
              <td data-label="Description">Print an integer stored in a register to the output.</td>
              <td data-label="Example"><pre>OUT AX</pre></td>
            </tr>
            <tr>
              <td data-label="Instruction"><code>HALT (11)</code></td>
              <td data-label="Description">Stop the program execution.</td>
              <td data-label="Example"><pre>HALT</pre></td>
            </tr>
            <tr>
              <td data-label="Instruction"><code>START (12)</code></td>
              <td data-label="Description">Define the program entry point.</td>
              <td data-label="Example"><pre>START</pre></td>
            </tr>
            <tr>
              <td data-label="Instruction"><code>MOV_STR (13)</code></td>
              <td data-label="Description">Move a string value into a register.</td>
              <td data-label="Example"><pre>MOV_STR DX, "Hello World"</pre></td>
            </tr>
            <tr>
              <td data-label="Instruction"><code>PUTS (14)</code></td>
              <td data-label="Description">Print a string literal.</td>
              <td data-label="Example"><pre>PUTS "Test"</pre></td>
            </tr>
            <tr>
              <td data-label="Instruction"><code>JMP (15)</code></td>
              <td data-label="Description">Jump unconditionally to a label.</td>
              <td data-label="Example"><pre>JMP loop</pre></td>
            </tr>
            <tr>
              <td data-label="Instruction"><code>JNZ (16)</code></td>
              <td data-label="Description">Jump if zero flag is not set (last result was not zero).</td>
              <td data-label="Example"><pre>JNZ loop</pre></td>
            </tr>
            <tr>
              <td data-label="Instruction"><code>AND (18)</code></td>
              <td data-label="Description">Perform bitwise AND on two operands.</td>
              <td data-label="Example"><pre>AND AX, BX</pre></td>
            </tr>
            <tr>
              <td data-label="Instruction"><code>GETS_STR (19)</code></td>
              <td data-label="Description">Get input string from user and store in register or memory.</td>
              <td data-label="Example"><pre>GETS_STR DX</pre></td>
            </tr>
            <tr>
              <td data-label="Instruction"><code>PSTR (35)</code></td>
              <td data-label="Description">Print a string pointer to console.</td>
              <td data-label="Example"><pre>PSTR DX</pre></td>
            </tr>
            <tr>
              <td data-label="Instruction"><code>CMP_STR (37)</code></td>
              <td data-label="Description">Compare two strings and set flags accordingly.</td>
              <td data-label="Example"><pre>CMP_STR DX, BX</pre></td>
            </tr>
            <tr>
              <td data-label="Instruction"><code>GETS_INT (38)</code></td>
              <td data-label="Description">Get input integer from user.</td>
              <td data-label="Example"><pre>GETS_INT AX</pre></td>
            </tr>
          </tbody>
        </table>
      </section>

      <a href="syntax.html" class="btn">Go to Syntax Page</a>
    </main>
  </div>
</body>
</html>
